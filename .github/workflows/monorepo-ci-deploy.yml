# name: Monorepo CI & Deploy

# on:
#   pull_request:
#     branches: [ main ]
#   push:
#     branches: [ main ]

# jobs:
#   frontend:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#       - uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'npm'
#           cache-dependency-path: frontend/package-lock.json
#       - name: Install FE deps
#         working-directory: frontend
#         run: npm ci
#       # - name: Lint FE
#       #   working-directory: frontend
#       #   run: npm run lint --if-present
#       # - name: Test FE
#       #   working-directory: frontend
#       #   run: npm test --if-present
#       - name: Build FE
#         working-directory: frontend
#         run: npm run build
#       - name: Deploy FE to Vercel (preview/prod)
#         if: github.ref == 'refs/heads/main'
#         env:
#           VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
#         run: npx vercel --cwd frontend --prod --confirm --token $VERCEL_TOKEN

#   backend:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#       - uses: actions/setup-node@v4
#         with:
#           node-version: '20'
#           cache: 'npm'
#           cache-dependency-path: backend/package-lock.json
#       - name: Install BE deps
#         working-directory: backend
#         run: npm ci
#       # - name: Lint BE
#       #   working-directory: backend
#       #   run: npm run lint --if-present
#       # - name: Test BE
#       #   working-directory: backend
#       #   run: npm test --if-present
#       - name: Deploy BE to Vercel
#         if: github.ref == 'refs/heads/main'
#         env:
#           VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
#         run: npx vercel --cwd backend --prod --confirm --token $VERCEL_TOKEN